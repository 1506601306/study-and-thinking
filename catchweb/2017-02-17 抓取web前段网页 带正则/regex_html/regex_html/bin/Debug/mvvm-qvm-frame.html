<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="0FNbiBWk1FugWYo-RiGxQyIHebGeLoXp3HB7AxIFKy8" />
    <meta name="baidu-site-verification" content="tYoUqpkCCv" />
    <meta name="baidu-site-verification" content="IGN97NW90O" />
    
    <title>移动端mvvm框架qvm实现 | ouvenzhang的博客</title>

    <meta http-equiv="x-dns-prefetch-control" content="on" />
    <link rel="dns-prefetch" href="cdnjs.cloudflare.com" />
    <link rel="dns-prefetch" href="1.url.cn" />

    <meta name="description" itemprop="description" content="移动端mvvm框架qvm实现,mvvm,qvm ">
    <meta itemprop="name" content="移动端mvvm框架qvm实现">
    <meta itemprop="image" content="http://ouvens.github.io/blog/assets/logo.png">
    <meta itemprop="keywords" name="keywords" content="移动端mvvm框架qvm实现,mvvm,qvm ">

    
    <meta name="author" content="ouvenzhang">
    <meta name="copyright" content="&copy; ouvenzhang 2017">
    <meta name="protocol" content="1">
    

    <!-- External libraries -->
    <link rel="stylesheet" href="/assets/css/iconfont.css">
    <link rel="stylesheet" href="/css/monokai_sublime.css">

    <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">
  	<link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
    
  	<meta name="msapplication-TileColor" content="#ffffff">
  	<meta name="theme-color" content="#ffffff">
    <meta name="msapplication-TileImage" content="/assets/icons/icon.png">

  	<!-- Site styles -->
    <link rel="stylesheet" href="/css/main.css">

    <link rel="alternate" type="application/rss+xml" title="极限前端" href="http://ouvens.github.io//feed.xml" />
    <script>
    // 访问统计
    var domain = 'jixianqianduan.com';
    var oldDomain = 'ouvens.github.io';
    if(location.host === domain){
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "//hm.baidu.com/hm.js?b536b128dc21c3d18fdc028f0609e3f0";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
    }else if(location.host === oldDomain){
        window.location.href = location.href.replace(oldDomain, domain);
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "//hm.baidu.com/hm.js?041efd2cb345ca1b9dbdbb2383cb716d";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
    }

    // 链接提交

    if(location.protocol === 'https'){
        !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=window.location.href,t=document.referrer;if(!e.test(r)){var o="https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif";t?(o+="?r="+encodeURIComponent(document.referrer),r&&(o+="&l="+r)):r&&(o+="?l="+r);var i=new Image;i.src=o}}(window);
    }else{
        !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=window.location.href,o=document.referrer;if(!e.test(r)){var n="//api.share.baidu.com/s.gif";o?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var t=new Image;t.src=n}}(window);
    }


    </script>
</head>

    <body>
        <div class="navigation" role="banner">
    <div class="navigation-wrapper">
    <a href="/" class="logo">
    	
      <img src="/assets/logo.png" alt="极限前端">
      
    </a>
    <span class="search-input" id="search-input">
      <input type="text" value="" class="search-text" placeholder="输入搜索关键字">
      <i class="icon-font i-search search-btn"></i>
    </span>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
    	<i class="icon-font i-list fa fa-bars"></i>
    </a>
    <span class="nav" role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">
      	
          
          <li class="nav-link">
            <a href="/about/">关于</a>
          </li>
          
        
          
        
          
        
          
        
          
          <li class="nav-link">
            <a href="/category/">所有文章</a>
          </li>
          
        
          
          <li class="nav-link">
            <a href="/tags/">标签分类</a>
          </li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          <li id="github-info" class="nav-link" title="https://github.com/ouvens">
            <a class="github-info" href="https://github.com/ouvens" target="_blank">
            <img src="/assets/github.png" height="34" width="130" alt="github地址"></a>
          </li>
      </ul>
    </span>
  </div>
</div>

            <div class="page-content">
        <div class="post">
<div class="post-header-container has-cover">
	<header class="post-header">
	  <h1 class="title">移动端mvvm框架qvm实现</h1>
	  <p class="info">by <strong>ouven</strong></p>
	</header>
</div>
<div class="wrapper">



<div class="post-meta">
	<div class="post-date">2015年08月20日</div>
	<div class="post-categories">
	 in  
		<a target="_blank" href="/category/?cate=frontend-javascript">Frontend-javascript</a>
	  
	</div>
</div>	

<article class="post-content">
  <hr />

<p><a href="https://github.com/ouvens/qvm">gitHub地址</a></p>

<h3 id="minimvvmqvm">1，移动端minimvvm框架qvm实现</h3>

<p>qvm概念，一个适用于移动端的mini mvvm(什么是mvvm？没了解的同学自己去了解)框架。参考了angular和vuejs的设计实现思路，并进行简化封装，目前使用的zepto基本依赖库，使用最少的代码实现了基础功能版。</p>

<h3 id="section">2，为什么要做它</h3>

<p>PC浏览器时代，实现mvvm有着麻烦的兼容性问题。而在移动浏览器时代，浏览器原生的支持可以让我们用最少的代码来实现一个mvvm框架库，来最大程度的减少移动端业务代码的开发工作。预计对于中大型的移动前端应用项目，使用mvvm能减少至少30%的业务量，让项目更容易维护。
   (不过目前仍有很多不完善的地方后面需要持续改进)</p>

<h3 id="api">3，及其简单的API介绍</h3>

<p>directive: 以q-开始的属性为我们定义的元素动作指令</p>

<h4 id="vm">vm模型结构介绍：</h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre></td><td class="code"><pre>    <span class="p">{</span>
    <span class="nl">$id</span><span class="p">:</span> <span class="mi">823832887973495</span><span class="p">,</span> <span class="c1">//qvm对象的全局id,每个qvm对象对应一个</span>
    <span class="nx">$elem</span><span class="err">:</span> <span class="err">#</span><span class="nx">div</span><span class="p">,</span> <span class="c1">//对应的view</span>
    <span class="nx">$model</span><span class="err">:</span> <span class="p">{</span>  <span class="c1">//viewModel,通过directive关联view和model的操作</span>
        <span class="nl">text</span><span class="p">:{</span>
            <span class="nl">ns</span><span class="p">:</span> <span class="nx">ns</span><span class="p">,</span> <span class="c1">//获取对象data或指令的namespace</span>
            <span class="nx">accessor</span><span class="err">:</span> <span class="nx">accessor</span><span class="p">,</span> <span class="c1">//同一的外部访问器，vm通过修改它来改变</span>
            <span class="nx">key</span><span class="err">:</span> <span class="nx">text</span><span class="p">,</span> <span class="c1">//指令名称</span>
            <span class="nx">directive</span><span class="err">：</span> <span class="p">[</span><span class="nx">directive</span><span class="p">],</span> <span class="c1">//指令集</span>
            <span class="nx">setter</span><span class="err">:</span> <span class="kd">function</span><span class="p">,</span> <span class="c1">//对象设置方法</span>
            <span class="nx">getter</span><span class="err">:</span> <span class="kd">function</span><span class="p">,</span> <span class="c1">//对象获取值方法</span>
            <span class="nx">tpl</span><span class="err">:</span> <span class="err">#</span><span class="nx">div</span> <span class="c1">//模板字符串,部分指令需要使用，如repeat</span>
            <span class="c1">//后续可能还要增加</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">data</span><span class="err">:</span> <span class="p">{</span>      <span class="c1">//对应的model，即数据层</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h4 id="q-text-innerhtml">3.1 q-text 改变节点innerHTML</h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre></td><td class="code"><pre>    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"demo"</span> <span class="nx">q</span><span class="o">-</span><span class="nx">text</span><span class="o">=</span><span class="s1">'text'</span><span class="o">&gt;&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/javascript"</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"js/zepto.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/javascript"</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"js/qvm.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
    <span class="kd">var</span> <span class="nx">vm</span> <span class="o">=</span> <span class="nx">qvm</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span>
        <span class="na">selector</span><span class="p">:</span> <span class="s1">'#demo'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">text</span><span class="p">:</span> <span class="s1">'&lt;h2&gt;Hello World!&lt;/h2&gt;'</span>
        <span class="p">}</span>
    <span class="p">});</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">vm</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">accessor</span> <span class="o">=</span> <span class="s1">'&lt;h2&gt;Fuck World!&lt;/h2&gt;'</span><span class="p">;</span>    <span class="c1">//渲染html，通过改变accessor改变innerHTML。</span>
    <span class="p">},</span><span class="mi">4000</span><span class="p">)</span>
    <span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></pre></td></tr></tbody></table>
</div>
</div>

<h4 id="q-class-class">3.2 q-class 改变节点class属性</h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></td><td class="code"><pre>    <span class="o">&lt;</span><span class="nx">style</span><span class="o">&gt;</span>
    <span class="p">.</span><span class="nx">red</span><span class="p">{</span>
        <span class="nl">color</span><span class="p">:</span> <span class="nx">red</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="nx">green</span><span class="p">{</span>
        <span class="nl">color</span><span class="p">:</span> <span class="nx">green</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="o">&lt;</span><span class="sr">/style</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"demo"</span> <span class="nx">q</span><span class="o">-</span><span class="nx">text</span><span class="o">=</span><span class="s1">'text'</span> <span class="nx">q</span><span class="o">-</span><span class="kr">class</span><span class="o">=</span><span class="s2">"color"</span><span class="o">&gt;&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/javascript"</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"js/zepto.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/javascript"</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"js/qvm.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
    <span class="kd">var</span> <span class="nx">vm</span> <span class="o">=</span> <span class="nx">qvm</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span>
        <span class="na">selector</span><span class="p">:</span> <span class="s1">'#demo'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">text</span><span class="p">:</span> <span class="s1">'&lt;h2&gt;Hello World!&lt;/h2&gt;'</span><span class="p">,</span>
            <span class="na">color</span><span class="p">:</span> <span class="s1">'red'</span>
        <span class="p">}</span>
    <span class="p">});</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">vm</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">accessor</span> <span class="o">=</span> <span class="s1">'&lt;h2&gt;Fuck World!&lt;/h2&gt;'</span><span class="p">;</span>
        <span class="nx">vm</span><span class="p">.</span><span class="kr">class</span><span class="p">.</span><span class="nx">accessor</span> <span class="o">=</span> <span class="s1">'green'</span><span class="p">;</span>
    <span class="p">},</span><span class="mi">4000</span><span class="p">)</span>
    <span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></pre></td></tr></tbody></table>
</div>
</div>

<h4 id="q-attr">3.3 q-attr数据属性赋值</h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre></td><td class="code"><pre>    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;&lt;</span><span class="nx">a</span><span class="o">&gt;&lt;</span><span class="nx">img</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"demo"</span> <span class="nx">q</span><span class="o">-</span><span class="nx">attr</span><span class="o">-</span><span class="nx">src</span><span class="o">=</span><span class="s2">"img"</span> <span class="nx">width</span><span class="o">=</span><span class="s2">"50"</span> <span class="nx">height</span><span class="o">=</span><span class="s2">"30"</span><span class="o">&gt;&lt;</span><span class="sr">/a&gt;&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/javascript"</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"js/zepto.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/javascript"</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"js/qvm.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
    <span class="kd">var</span> <span class="nx">vm</span> <span class="o">=</span> <span class="nx">qvm</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span>
        <span class="na">selector</span><span class="p">:</span> <span class="s1">'#demo'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">img</span><span class="p">:</span> <span class="s1">'http://9.url.cn/edu/banner/img/505d9c39_760_300.jpg'</span>
        <span class="p">}</span>
    <span class="p">});</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">vm</span><span class="p">.</span><span class="nx">attr_src</span><span class="p">.</span><span class="nx">accessor</span> <span class="o">=</span> <span class="s1">'http://9.url.cn/edu/banner/img/880facff_760_300.jpg'</span><span class="p">;</span>
    <span class="p">},</span><span class="mi">4000</span><span class="p">);</span>
    <span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></pre></td></tr></tbody></table>
</div>
</div>

<p>vm.class.accessor = ‘green’; 改变元素的class类，从red改为green。
这里注意一下使用attr- 和data-指令使用attr_src和data_src来读取访问器，后面需要统一接口。</p>

<h4 id="q-data">3.4 q-data数据属性赋值</h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre></td><td class="code"><pre>    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"demo"</span> <span class="nx">q</span><span class="o">-</span><span class="nx">data</span><span class="o">-</span><span class="nx">title</span><span class="o">=</span><span class="s2">"text"</span><span class="o">&gt;&lt;</span><span class="nx">a</span><span class="o">&gt;&lt;</span><span class="nx">img</span> <span class="nx">q</span><span class="o">-</span><span class="nx">attr</span><span class="o">-</span><span class="nx">src</span><span class="o">=</span><span class="s2">"img"</span> <span class="nx">width</span><span class="o">=</span><span class="s2">"50"</span> <span class="nx">height</span><span class="o">=</span><span class="s2">"30"</span><span class="o">&gt;&lt;</span><span class="sr">/a&gt;&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/javascript"</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"js/zepto.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/javascript"</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"js/qvm.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
    <span class="kd">var</span> <span class="nx">vm</span> <span class="o">=</span> <span class="nx">qvm</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span>
        <span class="na">selector</span><span class="p">:</span> <span class="s1">'#demo'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">text</span><span class="p">:</span> <span class="s1">'PS 大神教程'</span><span class="p">,</span>
            <span class="na">img</span><span class="p">:</span> <span class="s1">'http://9.url.cn/edu/banner/img/505d9c39_760_300.jpg'</span>
        <span class="p">}</span>
    <span class="p">});</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">vm</span><span class="p">.</span><span class="nx">data_title</span><span class="p">.</span><span class="nx">accessor</span> <span class="o">=</span> <span class="s1">'艺术人生'</span><span class="p">;</span>
    <span class="p">},</span><span class="mi">4000</span><span class="p">);</span>
    <span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></pre></td></tr></tbody></table>
</div>
</div>

<p>此方法用于改变data属性。</p>

<h4 id="q-repeat-">3.5 q-repeat 嵌套使用</h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46</pre></td><td class="code"><pre>    <span class="o">&lt;</span><span class="nx">style</span><span class="o">&gt;</span>
    <span class="p">.</span><span class="nx">red</span><span class="p">{</span>
        <span class="nl">color</span><span class="p">:</span> <span class="nx">red</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="nx">green</span><span class="p">{</span>
        <span class="nl">color</span><span class="p">:</span> <span class="nx">green</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="o">&lt;</span><span class="sr">/style</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"demo"</span> <span class="nx">q</span><span class="o">-</span><span class="kr">class</span><span class="o">=</span><span class="s2">"color"</span> <span class="nx">q</span><span class="o">-</span><span class="nx">repeat</span><span class="o">=</span><span class="s2">"list"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">img</span> <span class="nx">q</span><span class="o">-</span><span class="nx">attr</span><span class="o">-</span><span class="nx">src</span><span class="o">=</span><span class="s2">"img"</span> <span class="nx">width</span><span class="o">=</span><span class="s2">"50"</span> <span class="nx">height</span><span class="o">=</span><span class="s2">"30"</span><span class="o">&gt;&lt;</span><span class="nx">span</span> <span class="nx">q</span><span class="o">-</span><span class="nx">text</span><span class="o">=</span><span class="s2">"title"</span> <span class="nx">q</span><span class="o">-</span><span class="kr">class</span><span class="o">=</span><span class="s2">"color"</span><span class="o">&gt;&lt;</span><span class="sr">/span</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/javascript"</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"js/zepto.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/javascript"</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"js/qvm.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
    <span class="kd">var</span> <span class="nx">list</span> <span class="o">=</span><span class="p">[{</span>
                <span class="na">img</span><span class="p">:</span> <span class="s1">'http://9.url.cn/edu/banner/img/10b0af94_760_300.jpg'</span><span class="p">,</span>
                <span class="na">title</span><span class="p">:</span> <span class="s1">'音乐改变世界'</span>
            <span class="p">},{</span>
                <span class="na">img</span><span class="p">:</span> <span class="s1">'http://9.url.cn/edu/banner/img/880facff_760_300.jpg'</span><span class="p">,</span>
                <span class="na">title</span><span class="p">:</span> <span class="s1">'PS 大神教程'</span>
            <span class="p">},{</span>
                <span class="na">img</span><span class="p">:</span> <span class="s1">'http://9.url.cn/edu/banner/img/505d9c39_760_300.jpg'</span><span class="p">,</span>
                <span class="na">title</span><span class="p">:</span> <span class="s1">'艺术人生'</span>
            <span class="p">}];</span>
    <span class="kd">var</span> <span class="nx">vm</span> <span class="o">=</span> <span class="nx">qvm</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span>
        <span class="na">selector</span><span class="p">:</span> <span class="s1">'#demo'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">text</span><span class="p">:</span> <span class="s1">'&lt;h2&gt;Hello World!&lt;/h2&gt;'</span><span class="p">,</span>
            <span class="na">color</span><span class="p">:</span> <span class="s1">'red'</span><span class="p">,</span>
            <span class="na">list</span><span class="p">:</span> <span class="nx">list</span>
        <span class="p">}</span>
    <span class="p">});</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="k">delete</span> <span class="nx">list</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="nx">list</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">title</span><span class="o">=</span><span class="s1">'music change the world'</span><span class="p">;</span>
        <span class="nx">list</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">title</span><span class="o">=</span><span class="s1">'PS master learning'</span><span class="p">;</span>
        <span class="nx">vm</span><span class="p">.</span><span class="kr">class</span><span class="p">.</span><span class="nx">accessor</span> <span class="o">=</span> <span class="s1">'green'</span><span class="p">;</span>
        <span class="nx">vm</span><span class="p">.</span><span class="nx">repeat</span><span class="p">.</span><span class="nx">accessor</span> <span class="o">=</span> <span class="nx">list</span><span class="p">;</span>
    <span class="p">},</span><span class="mi">4000</span><span class="p">);</span>
    <span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span><span class="k">delete</span> <span class="nx">list</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="nx">list</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">title</span><span class="o">=</span><span class="s1">'music change the world'</span><span class="p">;</span>
<span class="nx">list</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">title</span><span class="o">=</span><span class="s1">'PS master learning'</span><span class="p">;</span>
<span class="err">改变</span><span class="nx">repeat</span><span class="err">渲染数组的内容，只对数组进行修改和删除长度。</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h4 id="q-">3.6 q-对象内部渲染</h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></td><td class="code"><pre>    <span class="o">&lt;</span><span class="nx">style</span><span class="o">&gt;</span>
    <span class="p">.</span><span class="nx">red</span><span class="p">{</span>
        <span class="nl">color</span><span class="p">:</span> <span class="nx">red</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="nx">green</span><span class="p">{</span>
        <span class="nl">color</span><span class="p">:</span> <span class="nx">green</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="o">&lt;</span><span class="sr">/style</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"demo"</span> <span class="nx">q</span><span class="o">-</span><span class="nx">repeat</span><span class="o">=</span><span class="s2">"list"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">q</span><span class="o">-</span><span class="kr">class</span><span class="o">=</span><span class="s2">"color"</span> <span class="nx">q</span><span class="o">-</span><span class="nx">text</span><span class="o">=</span><span class="s2">"title"</span><span class="o">&gt;&lt;</span><span class="sr">/span</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">span</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">img</span> <span class="nx">q</span><span class="o">-</span><span class="nx">attr</span><span class="o">-</span><span class="nx">src</span><span class="o">=</span><span class="s2">"img.src"</span> <span class="nx">width</span><span class="o">=</span><span class="s2">"50"</span> <span class="nx">height</span><span class="o">=</span><span class="s2">"30"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/span</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/javascript"</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"js/zepto.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/javascript"</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"js/qvm.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">title</span><span class="p">:</span> <span class="s1">'&lt;h2&gt;Hello World!&lt;/h2&gt;'</span><span class="p">,</span>
        <span class="na">color</span><span class="p">:</span> <span class="s1">'red'</span><span class="p">,</span>
        <span class="na">img</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">src</span><span class="p">:</span> <span class="s1">'http://9.url.cn/edu/banner/img/880facff_760_300.jpg'</span>
        <span class="p">}</span>
    <span class="p">};</span>
    <span class="kd">var</span> <span class="nx">vm</span> <span class="o">=</span> <span class="nx">qvm</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span>
        <span class="na">selector</span><span class="p">:</span> <span class="s1">'#demo'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">list</span><span class="p">:</span> <span class="nx">data</span>
        <span class="p">}</span>
    <span class="p">});</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s1">'green'</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="s1">'&lt;h2&gt;Fuck World!&lt;/h2&gt;'</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="s1">'http://9.url.cn/edu/banner/img/10b0af94_760_300.jpg'</span><span class="p">;</span>
        <span class="nx">vm</span><span class="p">.</span><span class="nx">repeat</span><span class="p">.</span><span class="nx">accessor</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
    <span class="p">},</span><span class="mi">4000</span><span class="p">);</span>
    <span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></pre></td></tr></tbody></table>
</div>
</div>

<p>qvm支持嵌套渲染，但是viewModel以定义的最外层数据为准。</p>

<h4 id="q-on">3.7 q-on简单事件绑定</h4>

<p>定义的动作和事件名，目前子节点上的on代理在根元素上，避免了重复绑定，如果根节点和根节点同时含有on方法，则按照冒泡的原则进行事件处理。实现时使用了根节点循环向下传递的方式。</p>

<h4 id="section-1">示例</h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></td><td class="code"><pre>    <span class="o">&lt;</span><span class="nx">style</span><span class="o">&gt;</span>
    <span class="p">.</span><span class="nx">red</span><span class="p">{</span>
        <span class="nl">color</span><span class="p">:</span> <span class="nx">red</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="nx">green</span><span class="p">{</span>
        <span class="nl">color</span><span class="p">:</span> <span class="nx">green</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="o">&lt;</span><span class="sr">/style</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"demo"</span> <span class="nx">q</span><span class="o">-</span><span class="nx">repeat</span><span class="o">=</span><span class="s2">"list"</span> <span class="nx">q</span><span class="o">-</span><span class="nx">on</span><span class="o">=</span><span class="s2">"click|action"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">q</span><span class="o">-</span><span class="kr">class</span><span class="o">=</span><span class="s2">"color"</span> <span class="nx">q</span><span class="o">-</span><span class="nx">text</span><span class="o">=</span><span class="s2">"title"</span><span class="o">&gt;&lt;</span><span class="sr">/span</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">span</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">img</span> <span class="nx">q</span><span class="o">-</span><span class="nx">attr</span><span class="o">-</span><span class="nx">src</span><span class="o">=</span><span class="s2">"img.src"</span> <span class="nx">width</span><span class="o">=</span><span class="s2">"50"</span> <span class="nx">height</span><span class="o">=</span><span class="s2">"30"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/span</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/javascript"</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"js/zepto.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/javascript"</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"js/qvm.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">title</span><span class="p">:</span> <span class="s1">'&lt;h2&gt;点我!&lt;/h2&gt;'</span><span class="p">,</span>
        <span class="na">color</span><span class="p">:</span> <span class="s1">'red'</span><span class="p">,</span>
        <span class="na">img</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">src</span><span class="p">:</span> <span class="s1">'http://9.url.cn/edu/banner/img/880facff_760_300.jpg'</span>
        <span class="p">}</span>
    <span class="p">};</span>
    <span class="kd">var</span> <span class="nx">vm</span> <span class="o">=</span> <span class="nx">qvm</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span>
        <span class="na">selector</span><span class="p">:</span> <span class="s1">'#demo'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">list</span><span class="p">:</span> <span class="nx">data</span>
        <span class="p">},</span>
        <span class="na">action</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
            <span class="nx">alert</span><span class="p">(</span><span class="s1">'点击事件!'</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
    <span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></pre></td></tr></tbody></table>
</div>
</div>

<p>目前实现了节点事件代理到最外层的qmv对象元素上。不对内部元素做绑定。</p>

<h4 id="q-directive">3.8 q-*自定义directive</h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40</pre></td><td class="code"><pre>    <span class="o">&lt;</span><span class="nx">style</span><span class="o">&gt;</span>
    <span class="p">.</span><span class="nx">red</span><span class="p">{</span>
        <span class="nl">color</span><span class="p">:</span> <span class="nx">red</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="nx">green</span><span class="p">{</span>
        <span class="nl">color</span><span class="p">:</span> <span class="nx">green</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="o">&lt;</span><span class="sr">/style</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"demo"</span> <span class="nx">q</span><span class="o">-</span><span class="nx">repeat</span><span class="o">=</span><span class="s2">"list"</span> <span class="nx">q</span><span class="o">-</span><span class="nx">on</span><span class="o">=</span><span class="s2">"click|action"</span> <span class="nx">q</span><span class="o">-</span><span class="nx">self</span><span class="o">=</span><span class="s1">'selfProcess'</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">q</span><span class="o">-</span><span class="kr">class</span><span class="o">=</span><span class="s2">"color"</span> <span class="nx">q</span><span class="o">-</span><span class="nx">text</span><span class="o">=</span><span class="s2">"title"</span><span class="o">&gt;&lt;</span><span class="sr">/span</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">span</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">img</span> <span class="nx">q</span><span class="o">-</span><span class="nx">attr</span><span class="o">-</span><span class="nx">src</span><span class="o">=</span><span class="s2">"img.src"</span> <span class="nx">width</span><span class="o">=</span><span class="s2">"50"</span> <span class="nx">height</span><span class="o">=</span><span class="s2">"30"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/span</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/javascript"</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"js/zepto.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/javascript"</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"js/qvm.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">title</span><span class="p">:</span> <span class="s1">'&lt;h2&gt;点我!&lt;/h2&gt;'</span><span class="p">,</span>
        <span class="na">color</span><span class="p">:</span> <span class="s1">'red'</span><span class="p">,</span>
        <span class="na">img</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">src</span><span class="p">:</span> <span class="s1">'http://9.url.cn/edu/banner/img/880facff_760_300.jpg'</span>
        <span class="p">}</span>
    <span class="p">};</span>
    <span class="kd">var</span> <span class="nx">vm</span> <span class="o">=</span> <span class="nx">qvm</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span>
        <span class="na">selector</span><span class="p">:</span> <span class="s1">'#demo'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">list</span><span class="p">:</span> <span class="nx">data</span>
        <span class="p">},</span>
        <span class="na">action</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
            <span class="nx">alert</span><span class="p">(</span><span class="s1">'点击事件!'</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="na">selfProcess</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">vm</span><span class="p">){</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">vm</span><span class="p">);</span>
            <span class="nx">alert</span><span class="p">(</span><span class="s1">'我是一个自定义处理指令!嘿嘿嘿~'</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">});</span>
    <span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></pre></td></tr></tbody></table>
</div>
</div>

<p>子定义的指令需要遵守一定的规则，例如下面q-self对应的指令为selfProcess的函数，则节点扫描时会自动执行self指令的selfProcess函数。</p>

<p>TODO：
更好的dirtycheck实现，类似virtual dom的方式~</p>

</article>


<div class="tags">
	<strong>Tags:</strong> <a target="_blank" href="/tags/?tag=mvvm">mvvm</a>,&nbsp;<a target="_blank" href="/tags/?tag=qvm">qvm</a>
</div>


	<script src="/assets/js/github.comment.js"></script>
	<div class="gc-comments" data-repos="ouvens/ouvens.github.io" data-issues="3" >
	    <div class="gc-comments-title">
	        评论
	    </div>
	    <div class="gc-comments-info">
	        想在此留下评论，请访问 <a href="issues_link">issues_link</a> 提交评论
	    </div>
	</div>
</div>
</div>


    </div>
    
<div class="qr-code qr-code-pay" title="加个微信交流交流">
    <img src="/assets/qrcode/qr-code-person.jpg" width="200" height="200" alt="公众号">
    <p>加我赏红包，哈哈哈</p>
</div>

<div class="qr-code qr-code-wx" title="定期获取更新动态">
    <img src="/assets/qrcode/qrcode.jpg" width="200" height="200" alt="公众号">
    <p>欢迎关注 <strong>极限前端</strong> 公众号</p>
</div>


    
<footer class="site-footer">
  <div class="wrapper">
    <h3 class="footer-heading">极限前端</h3>
    <div class="site-navigation">
    	<p><strong>站内</strong></p>
      <ul class="pages">
        
        
          <li class="nav-link"><a href="/about/">关于</a>
        
        
        
        
        
        
        
        
        
          <li class="nav-link"><a href="/category/">所有文章</a>
        
        
        
          <li class="nav-link"><a href="/tags/">标签分类</a>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </ul>
    </div>
    <div class="site-contact">
    	<p><strong>相关链接</strong></p>
        <ul class="social-media-list">
      	<li>
      		<a href="mailto:1025224452@qq.com">
	      		<i class="icon-font i-star"></i>
	      		<span class="username">1025224452@qq.com</span>
      		</a>
      	</li>

      	
	      	
	      	<li>
	           <a href="https://github.com/ouvens" title="Fork me on GitHub">
	               <i class="icon-font i-heart"></i>
	               <span class="username">ouvens</span>
	           </a>
	        </li>
	      	
      	

      </ul>
    </div>
    <div class="site-signature">
    	<p class="rss-subscribe text"><strong>订阅<a href="/feed.xml">via RSS</a></strong></p>
      <p class="text">极限前端, 极限前端社区, ouven的博客, ouvenzhang的博客, www.jixianqianduan.com, github地址, 前端技术, 讲述前端高效技术与前沿。</p>
    </div>
  </div>
</footer>

<!-- Scripts -->
<script src="//1.url.cn/jslib/jquery/1.9.1/jquery.min.js" defer></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js" defer></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/js/lightbox.min.js" defer></script>

<script src="/assets/js/main.js" defer></script>

    </body>
</html>
