<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="0FNbiBWk1FugWYo-RiGxQyIHebGeLoXp3HB7AxIFKy8" />
    <meta name="baidu-site-verification" content="tYoUqpkCCv" />
    <meta name="baidu-site-verification" content="IGN97NW90O" />
    
    <title>简单gulp前端自动化构建环境搭建 | ouvenzhang的博客</title>

    <meta http-equiv="x-dns-prefetch-control" content="on" />
    <link rel="dns-prefetch" href="cdnjs.cloudflare.com" />
    <link rel="dns-prefetch" href="1.url.cn" />

    <meta name="description" itemprop="description" content="简单gulp前端自动化构建环境搭建,打包工具,gulp ">
    <meta itemprop="name" content="简单gulp前端自动化构建环境搭建">
    <meta itemprop="image" content="http://ouvens.github.io/blog/assets/logo.png">
    <meta itemprop="keywords" name="keywords" content="简单gulp前端自动化构建环境搭建,打包工具,gulp ">

    
    <meta name="author" content="ouvenzhang">
    <meta name="copyright" content="&copy; ouvenzhang 2017">
    <meta name="protocol" content="1">
    

    <!-- External libraries -->
    <link rel="stylesheet" href="/assets/css/iconfont.css">
    <link rel="stylesheet" href="/css/monokai_sublime.css">

    <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">
  	<link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
    
  	<meta name="msapplication-TileColor" content="#ffffff">
  	<meta name="theme-color" content="#ffffff">
    <meta name="msapplication-TileImage" content="/assets/icons/icon.png">

  	<!-- Site styles -->
    <link rel="stylesheet" href="/css/main.css">

    <link rel="alternate" type="application/rss+xml" title="极限前端" href="http://ouvens.github.io//feed.xml" />
    <script>
    // 访问统计
    var domain = 'jixianqianduan.com';
    var oldDomain = 'ouvens.github.io';
    if(location.host === domain){
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "//hm.baidu.com/hm.js?b536b128dc21c3d18fdc028f0609e3f0";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
    }else if(location.host === oldDomain){
        window.location.href = location.href.replace(oldDomain, domain);
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "//hm.baidu.com/hm.js?041efd2cb345ca1b9dbdbb2383cb716d";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
    }

    // 链接提交

    if(location.protocol === 'https'){
        !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=window.location.href,t=document.referrer;if(!e.test(r)){var o="https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif";t?(o+="?r="+encodeURIComponent(document.referrer),r&&(o+="&l="+r)):r&&(o+="?l="+r);var i=new Image;i.src=o}}(window);
    }else{
        !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=window.location.href,o=document.referrer;if(!e.test(r)){var n="//api.share.baidu.com/s.gif";o?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var t=new Image;t.src=n}}(window);
    }


    </script>
</head>

    <body>
        <div class="navigation" role="banner">
    <div class="navigation-wrapper">
    <a href="/" class="logo">
    	
      <img src="/assets/logo.png" alt="极限前端">
      
    </a>
    <span class="search-input" id="search-input">
      <input type="text" value="" class="search-text" placeholder="输入搜索关键字">
      <i class="icon-font i-search search-btn"></i>
    </span>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
    	<i class="icon-font i-list fa fa-bars"></i>
    </a>
    <span class="nav" role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">
      	
          
          <li class="nav-link">
            <a href="/about/">关于</a>
          </li>
          
        
          
        
          
        
          
        
          
          <li class="nav-link">
            <a href="/category/">所有文章</a>
          </li>
          
        
          
          <li class="nav-link">
            <a href="/tags/">标签分类</a>
          </li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          <li id="github-info" class="nav-link" title="https://github.com/ouvens">
            <a class="github-info" href="https://github.com/ouvens" target="_blank">
            <img src="/assets/github.png" height="34" width="130" alt="github地址"></a>
          </li>
      </ul>
    </span>
  </div>
</div>

            <div class="page-content">
        <div class="post">
<div class="post-header-container has-cover">
	<header class="post-header">
	  <h1 class="title">简单gulp前端自动化构建环境搭建</h1>
	  <p class="info">by <strong>ouven</strong></p>
	</header>
</div>
<div class="wrapper">



<div class="post-meta">
	<div class="post-date">2015年05月27日</div>
	<div class="post-categories">
	 in  
		<a target="_blank" href="/category/?cate=frontend-build">Frontend-build</a>
	  
	</div>
</div>	

<article class="post-content">
  <p>为了前端团队更好的协作开发同时提高项目编码质量，我们需要将Web前端使用工程化方式构建；</p>

<p>目前需要一些简单的功能：</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre>1. 版本控制
6. 编译SASS
2. 检查JS
3. 图片合并
4. 压缩CSS
5. 压缩JS
</pre></td></tr></tbody></table>
</div>
</div>

<p>这些都是每个Web项目在构建、开发阶段需要做的事情。前端自动化构建环境可以把这些重复工作一次配置，多次重复执行，极大的提高开发效率。</p>

<p>目前最知名的构建工具： Gulp、Grunt、NPM + Webpack；</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre>grunt是前端工程化的先驱

gulp更自然基于流的方式连接任务

Webpack最年轻，擅长用于依赖管理，配置稍较复杂

推荐使用Gulp，Gulp基于nodejs中stream，效率更好语法更自然,不需要编写复杂的配置文件
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="use-gulp-to-automate-front-end-build-tasks">Use Gulp to automate front-end build tasks</h3>

<p>Gulp是基于 Node.js的，需要要安装 Node.js</p>

<p>1、为了确保依赖环境正确，我们先执行几个简单的命令检查。</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre>node -v
Node是一个基于Chrome JavaScript V8引擎建立的一个解释器
检测Node是否已经安装，如果正确安装的话你会看到所安装的Node的版本号
</pre></td></tr></tbody></table>
</div>
</div>

<p>2、接下来看看npm，它是 node 的包管理工具，可以利用它安装 gulp 所需的包</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre>npm -v
这同样能得到npm的版本号，装 Node 时已经自动安装了npm
</pre></td></tr></tbody></table>
</div>
</div>

<p>3、开始安装Gulp</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre>npm install -g gulp
全局安装 gulp

gulp -v
得到gulp的版本号，确认安装成功
</pre></td></tr></tbody></table>
</div>
</div>

<p>基础安装结束</p>

<p>4、切换到你的在项目根文件夹下，运行</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>npm install gulp --save-dev //将具体的gulp功能插件局部安装项目下
</pre></td></tr></tbody></table>
</div>
</div>

<p>5、安装gulp功能插件依赖包</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>npm install gulp-jshint gulp-sass gulp-concat gulp-uglify gulp-rename--save-dev
</pre></td></tr></tbody></table>
</div>
</div>

<blockquote>
  <p>gulp功能模块的文件会放在项目所在的目录的./node_modules 下</p>
</blockquote>

<p>6、我们目前先使用一些简单的功能：</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre>  - 检查Javascript
  - 编译Sass文件
  - 合并Javascript
  - 压缩合并并重命名Javascript
</pre></td></tr></tbody></table>
</div>
</div>

<blockquote>
  <p>新建gulpfile.js 配置文件放在项目根目录下</p>
</blockquote>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17</pre></td><td class="code"><pre>
   演示项目目录结构
    testProject   (项目名称)
    |–.git      通过git进行版本控制,项目自动生成这个文件
    |–node_modules  组件包目录
    |–dist      **发布环境**（编译自动生成的）
        |–css     样式文件(style.css style.min.css)
        |–images  图片文件(压缩图片\合并后的图片)
        |–js    js文件(main.js main.min.js)
        |–index.html  静态页面文件(压缩html)
    |–src       **开发环境**
        |–sass              sass文件
        |–images          图片文件
        |–js                js文件
        |–index.html    静态文件
    |–gulpfile.js       gulp配置文件
    |–package.json      依赖模块json文件,在项目目录下npm install会安装项目所有的依赖模块，简化项目的安装程序
</pre></td></tr></tbody></table>
</div>
</div>

<blockquote>
  <p>现在，项目文件夹都建好，组件也安装完毕了，我们需要编写gulpfile.js文件以指定gulp需要为我们完成什么任务。</p>
</blockquote>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>gulpfile.js内容如下：
</pre></td></tr></tbody></table>
</div>
</div>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre></td><td class="code"><pre>    // 引入gulp
    var gulp = require('gulp');

    // 引入组件
    var jshint = require('gulp-jshint');//检查js
    var sass   = require('gulp-sass');  //编译Sass
    var concat = require('gulp-concat');//合并
    var uglify = require('gulp-uglify');//uglify 组件（用于压缩 JS）
    var rename = require('gulp-rename');//重命名

    // 检查js脚本的任务
    gulp.task('lint', function() {
        gulp.src('./js/*.js') //可配置你需要检查脚本的具体名字。
            .pipe(jshint())
            .pipe(jshint.reporter('default'));
    });

    // 编译Sass
    gulp.task('sass', function() {
        gulp.src('./scss/*.scss')
            .pipe(sass())
            .pipe(gulp.dest('./css'));//dest()写入文件
    });

    // 合并，压缩js文件
    // 找到 js/ 目录下的所有 js 文件，压缩，重命名，最后将处理完成的js存放在 dist/js/ 目录下
    gulp.task('scripts', function() {
        gulp.src('./js/*.js')
            .pipe(concat('all.js'))
            .pipe(gulp.dest('./dist'))
            .pipe(rename('all.min.js'))
            .pipe(uglify())
            .pipe(gulp.dest('./dist'));

            console.log('gulp task is done');//自定义提醒信息
    });

    .... // 其他任务类似

    // 定义默认任务,执行gulp会自动执行的任务
    gulp.task('default', function(){
        gulp.run('lint', 'sass', 'scripts');

        // 监听js文件变化，当文件发生变化后会自动执行任务
        gulp.watch('./js/*.js', function(){
            gulp.run('lint','scripts');
        });
    });
</pre></td></tr></tbody></table>
</div>
</div>

<p>7、现在，回到命令行窗口，可以直接运行gulp任务了。</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre>gulp

这将执行定义的default任务，就和以下的命令式同一个意思

gulp default

当然，我们可以运行在gulpfile.js中定义的任意任务，比如，现在单独运行sass任务：

gulp sass
</pre></td></tr></tbody></table>
</div>
</div>

<p>8、编译会显示Finished,如果你的JS有什么不好的地方它会提醒，避免一些不必要的错误，十分贴心</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre>常见提醒：
1.禁止在同一行声明多个变量。
2.请使用 ===/!==来比较true/false或者数值
3.使用对象字面量替代new Array这种形式
4.不要使用全局函数。
5.Switch语句必须带有default分支
6.函数不应该有时候有返回值，有时候没有返回值。
7.For循环必须使用大括号
8.If语句必须使用大括号
9.for-in循环中的变量 应该使用var关键字明确限定作用域，从而避免作用域污染。
</pre></td></tr></tbody></table>
</div>
</div>

<p>9、gulp的插件数量很多，后面还可以根据自己的需要进行添加任务</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre>常用的gulp插件参考
gulp-imagemin:    压缩图片
gulp-ruby-sass:   支持sass，安装此版本需要安装ruby
gulp-minify-css:  压缩css
gulp-jshint:        检查js
gulp-uglify:        压缩js
gulp-concat:      合并文件
gulp-rename:      重命名文件
gulp-htmlmin:     压缩html
gulp-clean:       清空文件夹
gulp-livereload:  服务器控制客户端同步刷新（需配合chrome插件LiveReload及tiny-lr）
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="use-git-as-a-project-management-tool">Use Git as a project management tool</h3>

<p>安装git， 下载安装包会安装好 Git Shell 和可视化环境</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre>  http://git-scm.com/download/win

配置用户名：

git config --global user.name "Your Name"
git config --global user.email "email@example.com"
</pre></td></tr></tbody></table>
</div>
</div>

<p>关联一个到团队的库</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>git remote add origin git@github.com:markyun/My-blog.git
</pre></td></tr></tbody></table>
</div>
</div>

<p>添加文件到仓库，添加全部文件用 . 表示</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>git add .
</pre></td></tr></tbody></table>
</div>
</div>

<p>把文件提交到仓库</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>git commit -m " first add project file"
</pre></td></tr></tbody></table>
</div>
</div>

<p>提交文件到团队仓库</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>git push -u origin master //将本地的项目提交到远程仓库中。
</pre></td></tr></tbody></table>
</div>
</div>

<p>以上就完成了前端团队最基本的开发环境搭建和代码提交工作流程。</p>

<p>补充：ZSmart UED Team 的前端开发软件环境 (Windows, Linux, Mac OS X)</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre>安装Node.Js、NPM、Ruby、Java 基础环境
Sublime Text3 + 插件      用于编写前端代码
Google chrome 、Mozilla Firefox + Firebug
Internet Explorer       进行兼容测试和预览页面UI、动画效果和交互功能
Node.js+Gulp        进行前端自动化构建、JS语法验证、CSS压缩，图片压缩等；
Koala             实时编译Less、Sass、Compass、CoffeeScript;
Github            存储自己的代码库 、git或SVN用于版本控制和团队Code Review
Tomcat、DedeAMPZ、MAMP    进行简单运行环境演示
Photoshop CC 切图 + Sprites 合并小图标
XMind             画出清晰的工作或业务逻辑思维图
</pre></td></tr></tbody></table>
</div>
</div>

</article>


<div class="tags">
	<strong>Tags:</strong> <a target="_blank" href="/tags/?tag=打包工具">打包工具</a>,&nbsp;<a target="_blank" href="/tags/?tag=gulp">gulp</a>
</div>


	<script src="/assets/js/github.comment.js"></script>
	<div class="gc-comments" data-repos="ouvens/ouvens.github.io" data-issues="3" >
	    <div class="gc-comments-title">
	        评论
	    </div>
	    <div class="gc-comments-info">
	        想在此留下评论，请访问 <a href="issues_link">issues_link</a> 提交评论
	    </div>
	</div>
</div>
</div>


    </div>
    
<div class="qr-code qr-code-pay" title="加个微信交流交流">
    <img src="/assets/qrcode/qr-code-person.jpg" width="200" height="200" alt="公众号">
    <p>加我赏红包，哈哈哈</p>
</div>

<div class="qr-code qr-code-wx" title="定期获取更新动态">
    <img src="/assets/qrcode/qrcode.jpg" width="200" height="200" alt="公众号">
    <p>欢迎关注 <strong>极限前端</strong> 公众号</p>
</div>


    
<footer class="site-footer">
  <div class="wrapper">
    <h3 class="footer-heading">极限前端</h3>
    <div class="site-navigation">
    	<p><strong>站内</strong></p>
      <ul class="pages">
        
        
          <li class="nav-link"><a href="/about/">关于</a>
        
        
        
        
        
        
        
        
        
          <li class="nav-link"><a href="/category/">所有文章</a>
        
        
        
          <li class="nav-link"><a href="/tags/">标签分类</a>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </ul>
    </div>
    <div class="site-contact">
    	<p><strong>相关链接</strong></p>
        <ul class="social-media-list">
      	<li>
      		<a href="mailto:1025224452@qq.com">
	      		<i class="icon-font i-star"></i>
	      		<span class="username">1025224452@qq.com</span>
      		</a>
      	</li>

      	
	      	
	      	<li>
	           <a href="https://github.com/ouvens" title="Fork me on GitHub">
	               <i class="icon-font i-heart"></i>
	               <span class="username">ouvens</span>
	           </a>
	        </li>
	      	
      	

      </ul>
    </div>
    <div class="site-signature">
    	<p class="rss-subscribe text"><strong>订阅<a href="/feed.xml">via RSS</a></strong></p>
      <p class="text">极限前端, 极限前端社区, ouven的博客, ouvenzhang的博客, www.jixianqianduan.com, github地址, 前端技术, 讲述前端高效技术与前沿。</p>
    </div>
  </div>
</footer>

<!-- Scripts -->
<script src="//1.url.cn/jslib/jquery/1.9.1/jquery.min.js" defer></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js" defer></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/js/lightbox.min.js" defer></script>

<script src="/assets/js/main.js" defer></script>

    </body>
</html>
