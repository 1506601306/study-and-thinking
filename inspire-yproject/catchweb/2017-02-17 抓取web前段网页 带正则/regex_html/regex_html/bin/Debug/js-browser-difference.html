<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="0FNbiBWk1FugWYo-RiGxQyIHebGeLoXp3HB7AxIFKy8" />
    <meta name="baidu-site-verification" content="tYoUqpkCCv" />
    <meta name="baidu-site-verification" content="IGN97NW90O" />
    
    <title>javascript基础--js不同浏览器的差异性 | ouvenzhang的博客</title>

    <meta http-equiv="x-dns-prefetch-control" content="on" />
    <link rel="dns-prefetch" href="cdnjs.cloudflare.com" />
    <link rel="dns-prefetch" href="1.url.cn" />

    <meta name="description" itemprop="description" content="javascript基础--js不同浏览器的差异性,js兼容性 ">
    <meta itemprop="name" content="javascript基础--js不同浏览器的差异性">
    <meta itemprop="image" content="http://ouvens.github.io/blog/assets/logo.png">
    <meta itemprop="keywords" name="keywords" content="javascript基础--js不同浏览器的差异性,js兼容性 ">

    
    <meta name="author" content="ouvenzhang">
    <meta name="copyright" content="&copy; ouvenzhang 2017">
    <meta name="protocol" content="1">
    

    <!-- External libraries -->
    <link rel="stylesheet" href="/assets/css/iconfont.css">
    <link rel="stylesheet" href="/css/monokai_sublime.css">

    <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">
  	<link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
    
  	<meta name="msapplication-TileColor" content="#ffffff">
  	<meta name="theme-color" content="#ffffff">
    <meta name="msapplication-TileImage" content="/assets/icons/icon.png">

  	<!-- Site styles -->
    <link rel="stylesheet" href="/css/main.css">

    <link rel="alternate" type="application/rss+xml" title="极限前端" href="http://ouvens.github.io//feed.xml" />
    <script>
    // 访问统计
    var domain = 'jixianqianduan.com';
    var oldDomain = 'ouvens.github.io';
    if(location.host === domain){
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "//hm.baidu.com/hm.js?b536b128dc21c3d18fdc028f0609e3f0";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
    }else if(location.host === oldDomain){
        window.location.href = location.href.replace(oldDomain, domain);
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "//hm.baidu.com/hm.js?041efd2cb345ca1b9dbdbb2383cb716d";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
    }

    // 链接提交

    if(location.protocol === 'https'){
        !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=window.location.href,t=document.referrer;if(!e.test(r)){var o="https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif";t?(o+="?r="+encodeURIComponent(document.referrer),r&&(o+="&l="+r)):r&&(o+="?l="+r);var i=new Image;i.src=o}}(window);
    }else{
        !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=window.location.href,o=document.referrer;if(!e.test(r)){var n="//api.share.baidu.com/s.gif";o?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var t=new Image;t.src=n}}(window);
    }


    </script>
</head>

    <body>
        <div class="navigation" role="banner">
    <div class="navigation-wrapper">
    <a href="/" class="logo">
    	
      <img src="/assets/logo.png" alt="极限前端">
      
    </a>
    <span class="search-input" id="search-input">
      <input type="text" value="" class="search-text" placeholder="输入搜索关键字">
      <i class="icon-font i-search search-btn"></i>
    </span>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
    	<i class="icon-font i-list fa fa-bars"></i>
    </a>
    <span class="nav" role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">
      	
          
          <li class="nav-link">
            <a href="/about/">关于</a>
          </li>
          
        
          
        
          
        
          
        
          
          <li class="nav-link">
            <a href="/category/">所有文章</a>
          </li>
          
        
          
          <li class="nav-link">
            <a href="/tags/">标签分类</a>
          </li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          <li id="github-info" class="nav-link" title="https://github.com/ouvens">
            <a class="github-info" href="https://github.com/ouvens" target="_blank">
            <img src="/assets/github.png" height="34" width="130" alt="github地址"></a>
          </li>
      </ul>
    </span>
  </div>
</div>

            <div class="page-content">
        <div class="post">
<div class="post-header-container has-cover">
	<header class="post-header">
	  <h1 class="title">javascript基础--js不同浏览器的差异性</h1>
	  <p class="info">by <strong>ouven</strong></p>
	</header>
</div>
<div class="wrapper">



<div class="post-meta">
	<div class="post-date">2015年01月19日</div>
	<div class="post-categories">
	 in  
		<a target="_blank" href="/category/?cate=frontend-javascript">Frontend-javascript</a>
	  
	</div>
</div>	

<article class="post-content">
  <h3 id="javascript">javascript的浏览器差异性特征</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="kd">var</span> <span class="nx">ie6</span><span class="o">=!-</span><span class="p">[</span><span class="mi">1</span><span class="p">,]</span><span class="o">&amp;&amp;!</span><span class="nb">window</span><span class="p">.</span><span class="nx">XMLHttpRequest</span>
<span class="c1">//检查IE6最简洁代码</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>兼容性问题是由于多个浏览器同时存在而导致的。这些浏览器在处理一个相同的页面时，表现有时会有差异。这种差异可能很小，甚至不会被注意到；也可能很大，甚至造成在某个浏览器下无法正常浏览。我们把引起这些差异的问题统称为“浏览器兼容性问题”。下面让我们一起来看Javascript在解决兼容性问题上的方法。</p>

<ol>
  <li>
    <p>document.form.item 问题
问题：
代码中存在 document.formName.item(“itemName”) 这样的语句，不能在FF下运行
解决方法：
改用 document.formName.elements[“elementName”]</p>
  </li>
  <li>
    <p>集合类对象问 
问题：
代码中许多集合类对象取用时使用()，IE能接受，FF不能
解决方法：
改用 [] 作为下标运算，例：</p>
  </li>
</ol>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByName</span><span class="p">(</span><span class="s2">"inputName"</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span>  <span class="err">改为</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByName</span><span class="p">(</span><span class="s2">"inputName"</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<ol>
  <li>window.event
问题：
使用 window.event 无法在FF上运行
解决方法：
FF的 event 只能在事件发生的现场使用，此问题暂无法解决。可以把 event 传到函数里变通解决：</li>
</ol>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="nx">onMouseMove</span> <span class="o">=</span> <span class="s2">"functionName(event)"</span> 
<span class="kd">function</span> <span class="nx">functionName</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>  
<span class="nx">e</span> <span class="o">=</span> <span class="nx">e</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">event</span><span class="p">;</span>  
<span class="p">......</span>  
<span class="p">}</span>  
</pre></td></tr></tbody></table>
</div>
</div>

<ol>
  <li>
    <p>HTML对象的 id 作为对象名的问题
问题：
在IE中，HTML对象的 ID 可以作为 document 的下属对象变量名直接使用，在FF中不能
解决方法：
使用对象变量时全部用标准的 getElementById(“idName”)</p>
  </li>
  <li>
    <p>用 idName 字符串取得对象的问题
问题：
在IE中，利用 eval(“idName”) 可以取得 id 为 idName 的HTML对象，在FF中不能
解决方法：
用 getElementById(“idName”) 代替 eval(“idName”)</p>
  </li>
  <li>
    <p>变量名与某HTML对象 id 相同的问题
问题：
在FF中，因为对象 id 不作为HTML对象的名称，所以可以使用与HTML对象 id 相同的变量名，IE中不能
解决方法：
在声明变量时，一律加上 var ，以避免歧义，这样在IE中亦可正常运行
最好不要取与HTML对象 id 相同的变量名，以减少错误</p>
  </li>
  <li>
    <p>event.x 与 event.y 问题
问题：
在IE中，event 对象有x,y属性，FF中没有
解决方法：
在FF中，与 event.x 等效的是 event.pageX ，但event.pageX IE中没有
故采用 event.clientX 代替 event.x ，在IE中也有这个变量
event.clientX 与 event.pageX 有微妙的差别，就是滚动条
要完全一样，可以这样：
mX = event.x ? event.x : event.pageX;
然后用 mX 代替 event.x</p>
  </li>
  <li>
    <p>关于frame
问题：
在IE中可以用 window.testFrame 取得该frame，FF中不行
解决方法：</p>
  </li>
</ol>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="nb">window</span><span class="p">.</span><span class="nx">top</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"testFrame"</span><span class="p">).</span><span class="nx">src</span> <span class="o">=</span> <span class="s1">'xx.htm'</span> 
<span class="nb">window</span><span class="p">.</span><span class="nx">top</span><span class="p">.</span><span class="nx">frameName</span><span class="p">.</span><span class="nx">location</span> <span class="o">=</span> <span class="s1">'xx.htm'</span> 
</pre></td></tr></tbody></table>
</div>
</div>

<ol>
  <li>
    <p>取得元素的属性
在FF中，自己定义的属性必须 getAttribute() 取得</p>
  </li>
  <li>
    <p>在FF中没有 parentElement，parement.children 而用 parentNode，parentNode.childNodes
问题：
childNodes 的下标的含义在IE和FF中不同，FF的 childNodes 中会插入空白文本节点
解决方法：
可以通过 node.getElementsByTagName() 来回避这个问题 
问题： 
当html中节点缺失时，IE和FF对 parentNode 的解释不同，例如：</p>
  </li>
</ol>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="o">&lt;</span><span class="nx">form</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">table</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">input</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="sr">/table</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/form&gt;</span><span class="err"> 
</span></pre></td></tr></tbody></table>
</div>
</div>

<p>FF中 input.parentNode 的值为form，而IE中 input.parentNode 的值为空节点 
问题： 
FF中节点自己没有 removeNode 方法
解决方法：
必须使用如下方法 node.parentNode.removeChild(node)</p>

<ol>
  <li>
    <p>const 问题
问题：
在IE中不能使用 const 关键字
解决方法：
以 var 代替</p>
  </li>
  <li>
    <p>body 对象
FF的 body 在 body 标签没有被浏览器完全读入之前就存在，而IE则必须在 body 完全被读入之后才存在
这会产生在IE下，文档没有载入完时，在body上appendChild会出现空白页面的问题
解决方法：
一切在body上插入节点的动作，全部在onload后进行</p>
  </li>
  <li>
    <p>url encoding
问题：
一般FF无法识别js中的&amp;
解决方法：
在js中如果书写url就直接写&amp;不要写&amp;</p>
  </li>
  <li>
    <p>nodeName 和 tagName 问题
问题：
在FF中，所有节点均有 nodeName 值，但 textNode 没有 tagName 值，在IE中，nodeName 的使用有问题
解决方法：
使用 tagName，但应检测其是否为空</p>
  </li>
  <li>
    <p>元素属性
IE下 input.type 属性为只读，但是FF下可以修改</p>
  </li>
  <li>
    <p>document.getElementsByName() 和 document.all[name] 的问题
问题：
在IE中，getElementsByName()、document.all[name] 均不能用来取得 div 元素
是否还有其它不能取的元素还不知道（这个问题还有争议，还在研究中）</p>
  </li>
  <li>
    <p>调用子框架或者其它框架中的元素的问题
在IE中，可以用如下方法来取得子元素中的值
document.getElementById(“frameName”).(document.)elementName<br />
window.frames[“frameName”].elementName 
在FF中则需要改成如下形式来执行，与IE兼容：
window.frames[“frameName”].contentWindow.document.elementName<br />
window.frames[“frameName”].document.elementName</p>
  </li>
  <li>
    <p>对象宽高赋值问题
问题：
FireFox中类似 obj.style.height = imgObj.height 的语句无效
解决方法：
统一使用 obj.style.height = imgObj.height + “px”;</p>
  </li>
  <li>
    <p>innerText的问题
问题：
innerText 在IE中能正常工作，但是 innerText 在FireFox中却不行
解决方法：
在非IE浏览器中使用textContent代替innerText</p>
  </li>
  <li>
    <p>event.srcElement和event.toElement问题
问题：
IE下，even对象有srcElement属性，但是没有target属性；Firefox下，even对象有target属性，但是没有 srcElement属性
解决方法：</p>
  </li>
</ol>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span> <span class="o">||</span> <span class="nx">e</span><span class="p">.</span><span class="nx">srcElement</span><span class="p">;</span>  
<span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">relatedTarget</span> <span class="o">||</span> <span class="nx">e</span><span class="p">.</span><span class="nx">toElement</span><span class="p">;</span> 
</pre></td></tr></tbody></table>
</div>
</div>

<ol>
  <li>禁止选取网页内容
问题：
FF需要用CSS禁止，IE用JS禁止
解决方法：</li>
</ol>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="nx">IE</span><span class="err">:</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">onselectstart</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span><span class="k">return</span> <span class="kc">false</span><span class="p">;}</span>
<span class="nl">FF</span><span class="p">:</span> <span class="o">-</span><span class="nx">moz</span><span class="o">-</span><span class="nx">user</span><span class="o">-</span><span class="nx">select</span><span class="err">:</span><span class="nx">none</span><span class="p">;</span>
</pre></td></tr></tbody></table>
</div>
</div>

<ol>
  <li>捕获事件
问题：
FF没有setCapture()、releaseCapture()方法
解决方法：</li>
</ol>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre><span class="nx">IE</span><span class="err">:</span>
    <span class="nx">obj</span><span class="p">.</span><span class="nx">setCapture</span><span class="p">();</span>   
    <span class="nx">obj</span><span class="p">.</span><span class="nx">releaseCapture</span><span class="p">();</span> 
<span class="nl">FF</span><span class="p">:</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">captureEvents</span><span class="p">(</span><span class="nx">Event</span><span class="p">.</span><span class="nx">MOUSEMOVE</span><span class="o">|</span><span class="nx">Event</span><span class="p">.</span><span class="nx">MOUSEUP</span><span class="p">);</span>  
    <span class="nb">window</span><span class="p">.</span><span class="nx">releaseEvents</span><span class="p">(</span><span class="nx">Event</span><span class="p">.</span><span class="nx">MOUSEMOVE</span><span class="o">|</span><span class="nx">Event</span><span class="p">.</span><span class="nx">MOUSEUP</span><span class="p">);</span>  
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">captureEvents</span><span class="p">){</span>  
        <span class="nx">o</span><span class="p">.</span><span class="nx">setCapture</span><span class="p">();</span>  
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>  
        <span class="nb">window</span><span class="p">.</span><span class="nx">captureEvents</span><span class="p">(</span><span class="nx">Event</span><span class="p">.</span><span class="nx">MOUSEMOVE</span><span class="o">|</span><span class="nx">Event</span><span class="p">.</span><span class="nx">MOUSEUP</span><span class="p">);</span>  
    <span class="p">}</span>  
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">captureEvents</span><span class="p">){</span>  
        <span class="nx">o</span><span class="p">.</span><span class="nx">releaseCapture</span><span class="p">();</span>  
    <span class="p">}</span><span class="k">else</span>   <span class="p">{</span>  
        <span class="nb">window</span><span class="p">.</span><span class="nx">releaseEvents</span><span class="p">(</span><span class="nx">Event</span><span class="p">.</span><span class="nx">MOUSEMOVE</span><span class="o">|</span><span class="nx">Event</span><span class="p">.</span><span class="nx">MOUSEUP</span><span class="p">);</span>  
    <span class="p">}</span>  
</pre></td></tr></tbody></table>
</div>
</div>

<p>本文主要介绍的是IE和FF两个浏览器中的兼容性问题。随着浏览器种类的增多，出现的兼容性问题肯定也越来越多。浏览器兼容性问题的“解决”需要浏览器开发商、W3C、开发者共同的努力才能实现。</p>


</article>


<div class="tags">
	<strong>Tags:</strong> <a target="_blank" href="/tags/?tag=js兼容性">js兼容性</a>
</div>


	<script src="/assets/js/github.comment.js"></script>
	<div class="gc-comments" data-repos="ouvens/ouvens.github.io" data-issues="3" >
	    <div class="gc-comments-title">
	        评论
	    </div>
	    <div class="gc-comments-info">
	        想在此留下评论，请访问 <a href="issues_link">issues_link</a> 提交评论
	    </div>
	</div>
</div>
</div>


    </div>
    
<div class="qr-code qr-code-pay" title="加个微信交流交流">
    <img src="/assets/qrcode/qr-code-person.jpg" width="200" height="200" alt="公众号">
    <p>加我赏红包，哈哈哈</p>
</div>

<div class="qr-code qr-code-wx" title="定期获取更新动态">
    <img src="/assets/qrcode/qrcode.jpg" width="200" height="200" alt="公众号">
    <p>欢迎关注 <strong>极限前端</strong> 公众号</p>
</div>


    
<footer class="site-footer">
  <div class="wrapper">
    <h3 class="footer-heading">极限前端</h3>
    <div class="site-navigation">
    	<p><strong>站内</strong></p>
      <ul class="pages">
        
        
          <li class="nav-link"><a href="/about/">关于</a>
        
        
        
        
        
        
        
        
        
          <li class="nav-link"><a href="/category/">所有文章</a>
        
        
        
          <li class="nav-link"><a href="/tags/">标签分类</a>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </ul>
    </div>
    <div class="site-contact">
    	<p><strong>相关链接</strong></p>
        <ul class="social-media-list">
      	<li>
      		<a href="mailto:1025224452@qq.com">
	      		<i class="icon-font i-star"></i>
	      		<span class="username">1025224452@qq.com</span>
      		</a>
      	</li>

      	
	      	
	      	<li>
	           <a href="https://github.com/ouvens" title="Fork me on GitHub">
	               <i class="icon-font i-heart"></i>
	               <span class="username">ouvens</span>
	           </a>
	        </li>
	      	
      	

      </ul>
    </div>
    <div class="site-signature">
    	<p class="rss-subscribe text"><strong>订阅<a href="/feed.xml">via RSS</a></strong></p>
      <p class="text">极限前端, 极限前端社区, ouven的博客, ouvenzhang的博客, www.jixianqianduan.com, github地址, 前端技术, 讲述前端高效技术与前沿。</p>
    </div>
  </div>
</footer>

<!-- Scripts -->
<script src="//1.url.cn/jslib/jquery/1.9.1/jquery.min.js" defer></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js" defer></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/js/lightbox.min.js" defer></script>

<script src="/assets/js/main.js" defer></script>

    </body>
</html>
